@page "/"
@using HttpClient.ClientInterfaces
@using Domain.Model
@namespace BlazorWASM.Shared.Components
@inject IPostService postService

<PageTitle>Index</PageTitle>

<h1>Hello, world!</h1>

@if(posts!=null)
{
    @foreach (var post in posts)
    {
        <PostComponent Title="@post.Title" OwnerUsername="@post.OwnerUsername" Body="@post.Body"/>
    }
}

@code
{
    IEnumerable<Post> posts;
    
    protected override async Task OnInitializedAsync()
    {
        posts = await postService.GetAsync();
    }
}
